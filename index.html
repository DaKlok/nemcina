<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Nemƒçina Kv√≠zy | Boxy Style</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />

    <style>
        /* =========================================
           VARIABLES - UPDATE PRE HRANATEJ≈†√ç VZHƒΩAD
           ========================================= */
        :root {
            --md-sys-color-background: #141218;
            --md-sys-color-surface: #141218;
            --md-sys-color-surface-container: rgba(29, 27, 32, 0.9);
            --md-sys-color-surface-container-high: #2B2930;
            
            --md-sys-color-primary: #D0BCFF;
            --md-sys-color-on-primary: #381E72;
            --md-sys-color-primary-container: #4F378B;
            --md-sys-color-secondary: #CCC2DC;
            --md-sys-color-on-surface: #E6E1E5;
            --md-sys-color-on-surface-variant: #CAC4D0;
            --md-sys-color-outline: #938F99;
            --md-sys-color-outline-variant: #49454F;
            --md-sys-color-error: #F2B8B5;
            --md-sys-color-success: #B5F2B9;

            /* === ZMENEN√â HODNOTY PRE HRANATEJ≈†IE OKRAJE === */
            --md-sys-shape-corner-medium: 12px;   /* P√¥vodne 12px - pre inputy */
            --md-sys-shape-corner-large: 12px;   /* P√¥vodne 24px - pre kontajnery */
            --md-sys-shape-corner-full: 20px;     /* P√¥vodne 50px - pre hlavn√© prvky */
            
            --md-sys-elevation-1: 0px 1px 3px 1px rgba(0,0,0,0.15);
        }

        body {
            font-family: 'Roboto', sans-serif;
            background-color: var(--md-sys-color-background);
            color: var(--md-sys-color-on-surface);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100dvh; 
            margin: 0;
            padding: 16px;
            box-sizing: border-box;
            position: relative;
            overflow-x: hidden;
            -webkit-tap-highlight-color: transparent;
        }

        /* =========================================
           BACKGROUND (Optimalizovan√©)
           ========================================= */
        body::before, body::after {
            content: '';
            position: fixed;
            width: 80vw;
            height: 80vw;
            border-radius: 50%;
            z-index: -1;
            opacity: 0.4;
            will-change: transform;
        }

        body::before {
            background: radial-gradient(circle, var(--md-sys-color-primary-container) 0%, transparent 70%);
            top: -10%;
            left: -10%;
            animation: floatSlow 15s infinite alternate ease-in-out;
        }

        body::after {
            background: radial-gradient(circle, #633B48 0%, transparent 70%);
            bottom: -10%;
            right: -10%;
            animation: floatSlow 20s infinite alternate-reverse ease-in-out;
        }

        @keyframes floatSlow {
            0% { transform: translate3d(0, 0, 0) scale(1); }
            100% { transform: translate3d(30px, 20px, 0) scale(1.1); }
        }

        /* =========================================
           MAIN CONTAINER
           ========================================= */
        #container {
            background-color: var(--md-sys-color-surface-container);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            padding: 24px 20px;
            /* Pou≈æitie novej hranatej≈°ej premennej */
            border-radius: var(--md-sys-shape-corner-large);
            border: 1px solid rgba(255, 255, 255, 0.08);
            text-align: center;
            width: 100%;
            max-width: 450px;
            box-shadow: var(--md-sys-elevation-1);
        }

        /* =========================================
           TYPOGRAPHY
           ========================================= */
        header { margin-bottom: 24px; }
        
        #streakDisplay {
            font-size: 0.75rem;
            color: var(--md-sys-color-primary);
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            display: block;
            margin-bottom: 4px;
        }

        h1 {
            font-size: 1.5rem;
            font-weight: 400;
            margin: 0 0 8px 0;
            line-height: 1.3;
        }

        #instructionText {
            color: var(--md-sys-color-on-surface-variant);
            font-size: 0.9rem;
            margin: 0;
            line-height: 1.4;
        }

        /* =========================================
           WORD DISPLAY
           ========================================= */
        #slovakWord {
            font-size: 1.75rem;
            font-weight: 500;
            background-color: rgba(208, 188, 255, 0.05);
            color: var(--md-sys-color-primary);
            border: 1px solid rgba(208, 188, 255, 0.3);
            /* Pou≈æitie novej hranatej≈°ej premennej (8px namiesto 50px) */
            border-radius: var(--md-sys-shape-corner-full);
            margin: 0 auto 24px auto;
            padding: 16px 20px;
            width: 100%;
            box-sizing: border-box;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            word-wrap: break-word;
        }

        /* =========================================
           INPUTS
           ========================================= */
        #quizSelector, #inputField {
            width: 100%;
            box-sizing: border-box;
            background-color: var(--md-sys-color-surface-container-high);
            color: var(--md-sys-color-on-surface);
            border: 1px solid var(--md-sys-color-outline-variant);
            /* Pou≈æitie novej hranatej≈°ej premennej (4px namiesto 12px) */
            border-radius: var(--md-sys-shape-corner-medium);
            font-size: 16px;
        }

        #quizSelector {
            padding: 14px;
            margin-bottom: 24px;
            appearance: none;
            background-image: url('data:image/svg+xml;utf8,<svg fill="%23CAC4D0" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/></svg>');
            background-repeat: no-repeat;
            background-position: right 12px center;
        }

        #inputField {
            padding: 16px;
            margin-bottom: 20px;
            transition: border-color 0.2s;
        }

        #inputField:focus {
            outline: none;
            border-color: var(--md-sys-color-primary);
            background-color: rgba(208, 188, 255, 0.05);
        }

        /* =========================================
           BUTTONS & ANIMATIONS (HRANAT√â)
           ========================================= */
        button {
            font-family: 'Roboto', sans-serif;
            font-weight: 500;
            letter-spacing: 0.5px;
            text-transform: uppercase;
            cursor: pointer;
            border: none;
            /* ZMENA: Z√°kladn√Ω tvar je teraz hranat√Ω (8px) namiesto pilulky (50px) */
            border-radius: 8px; 
            transition: transform 0.15s cubic-bezier(0.4, 0, 0.2, 1), 
                        border-radius 0.2s ease-out,
                        background-color 0.2s;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }

        /* Pre zariadenia s my≈°ou (PC) */
        @media (hover: hover) {
            button:hover {
                /* ZMENA: Pri nabehnut√≠ sa e≈°te viac zostr√≠ (na 4px) */
                border-radius: 4px;
                transform: scale(1.02);
                box-shadow: 0px 4px 8px rgba(0,0,0,0.3);
            }
        }

        /* Pre v≈°etky zariadenia pri stlaƒçen√≠ */
        button:active {
            transform: scale(0.96);
            /* ZMENA: Pri stlaƒçen√≠ sa e≈°te viac zostr√≠ (na 4px) */
            border-radius: 4px;
        }

        #checkButton {
            padding: 16px;
            font-size: 1rem;
            color: var(--md-sys-color-on-primary);
            background-color: var(--md-sys-color-primary);
            width: 100%;
            margin-bottom: 16px;
            box-shadow: 0px 2px 4px rgba(0,0,0,0.2);
        }

        .button-container {
            display: flex; 
            gap: 12px;
            width: 100%;
        }

        .secondary-button {
            flex: 1;
            padding: 12px;
            font-size: 0.85rem;
            color: var(--md-sys-color-secondary);
            background-color: transparent;
            border: 1px solid var(--md-sys-color-outline);
        }

        #resetButton { color: var(--md-sys-color-error); border-color: rgba(242, 184, 181, 0.5); }

        /* =========================================
           FEEDBACK
           ========================================= */
        #message { min-height: 24px; margin-bottom: 16px; font-weight: 500; font-size: 0.95rem; line-height: 1.4; }
        .correct { color: var(--md-sys-color-success); }
        .incorrect { color: var(--md-sys-color-error); }

        /* =========================================
           MODAL
           ========================================= */
        .modal {
            display: none; position: fixed; z-index: 999; left: 0; top: 0; width: 100%; height: 100%; 
            background-color: rgba(0,0,0,0.8); backdrop-filter: blur(5px);
            align-items: center; justify-content: center; padding: 16px; box-sizing: border-box;
        }

        .modal-content {
            background-color: #1e1b20;
            padding: 24px; 
            /* Pou≈æitie novej hranatej≈°ej premennej (12px) */
            border-radius: var(--md-sys-shape-corner-large);
            width: 100%; 
            max-width: 500px;
            height: auto;
            max-height: 85vh;
            display: flex; 
            flex-direction: column;
            border: 1px solid rgba(255,255,255,0.1);
        }
        
        .modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        
        .close-button { 
            padding: 8px; margin: -8px;
            cursor: pointer; 
            border-radius: 50%; /* Kr√≠≈æik nech√°me guƒæat√Ω pre kontrast */
            display: flex; align-items: center; justify-content: center;
        }

        .modal-body {
            display: flex; flex-direction: column; gap: 24px; 
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }
        
        .word-list ul { padding: 0; margin: 0; list-style: none; }
        .word-list li { 
            padding: 12px; 
            background-color: rgba(255,255,255,0.03); 
            border-bottom: 1px solid rgba(255,255,255,0.05);
            font-size: 0.9rem;
        }
        /* Hranatej≈°ie rohy v zozname slov (8px) */
        .word-list li:first-child { border-top-left-radius: 8px; border-top-right-radius: 8px; }
        .word-list li:last-child { border-bottom-left-radius: 8px; border-bottom-right-radius: 8px; border-bottom: none; }
        
        #guessedList li { border-left: 4px solid var(--md-sys-color-success); }
    </style>
</head>
<body>

    <div id="container">
        <select id="quizSelector"></select>

        <header>
            <span id="streakDisplay">S√©ria: 0</span> 
            <h1 id="quizTitle">N√°zov kv√≠zu</h1>
            <p id="instructionText">In≈°trukcie...</p>
        </header>
        
        <div id="slovakWord">Naƒç√≠tavam...</div>
        
        <input type="text" id="inputField" placeholder="Va≈°a odpoveƒè" autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false">
        
        <div id="message"></div>

        <button id="checkButton">Skontrolova≈•</button>
        
        <div class="button-container">
            <button id="statusButton" class="secondary-button">Stav</button>
            <button id="resetButton" class="secondary-button">Reset</button>
        </div>
    </div>

    <div id="statusModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                 <h2>Stav kv√≠zu</h2>
                 <div class="close-button"><span class="material-symbols-outlined">close</span></div>
            </div>
            <div class="modal-body">
                <div id="guessedList" class="word-list"></div>
                <div id="remainingList" class="word-list"></div>
            </div>
        </div>
    </div>

    <script>
        // ==========================================
        // D√ÅTA (Bez zmeny)
        // ==========================================
        const quizData = {
            "slovicka1": {
                title: "Slov√≠ƒçka 1",
                instruction: "Prelo≈æte do nemƒçiny:",
                words: {
                    "hor√∫ƒçka": "das Fieber",
                    "denne": "t√§glich",
                    "me≈°kanie": "die Versp√§tung",
                    "sen": "der Traum",
                    "sn√≠va≈•": "Tr√§umen",
                    "cez pr√°zdniny":"in den Ferien",
                    "korculovat sa na lade":"Schlittschuh fahren",
                    "korculovat sa na kolieskovych korculiach":"Rollschuh fahren",
                    "sankovat sa":"rodeln",
                    "ponuka":"das Angebot",
                    "vybrat/zvolit si":"w√§hlen",
                    "oblast":"das Gebiet",
                    "milovnik":"der Liebhaber",
                    "poloha":"die Lage",
                    "lezenie":"klettern",
                    "vsade":"√ºberall",
                    "socha":"die Statue",
                    "volny cas":"die Freizeit",
                    "sloboda":"die Freiheit",
                    "dam to/stihnem to/zvladnem to!":"ich schaffe es",
                    "zazit":"erleben",
                    "casopis":"die Zeitschrift",
                    "noviny":"die Zeitung",
                    "dost":"genug",
                    "zem/podlaha":"der Boden",
                    "oblek":"der Anzug",
                    "plavky (zeny)":"der Badeanzug",
                    "plavky (muzi)":"die Badehose",
                    "som na cestach":"ich bin unterwegs",
                    "unaveny":"m√ºde",
                    "nalada":"die Laune",
                    "naladovy":"launisch",
                    "uz":"seit",
                    "vystava":"die Ausstellung",
                    "takmer":"fast",
                    "zucastnit sa":"teilnehmen",
                    "ozvat sa, prihlasit sa":"melden",
                    "pristav":"der Hafen",
                    "letisko":"der Flughafen",
                    "podujatie, udalost":"die Veranstaltung",
                    "doprava":"der Verkehr",
                    "zadarmo":"kostenlos",
                    "majstrovat":"basteln",
                    "dielna":"die Werkstatt",
                    "rozny":"verschieden",
                    "sutaz":"der Wettbewerb",
                    "konat sa":"stattfinden",
                    "podnikat":"unternehmen",
                    "tlaciaren":"der Drucker",
                    "vytlacit":"ausdrucken",
                    "zakaznik":"die Kunde",
                    "kolotoc":"der Karussell",
                    "ubytovanie":"die Unterkunft",
                    "odcestovanie, odchod":"die Abfahrt",
                    "pricestovanie, prichod":"die Ankunft",
                    "povoleny":"erlaub",
                    "zakazany":"verboten",
                    "hviezda":"der Stern",
                    "vzdialeny":"entfernt",
                    "mozny":"m√∂glich",
                    "moznost":"die M√∂glichkeit",
                    "tocit, natacat":"drehen",
                    "volba,v√Ωber":"die Wahl",
                    "pritom, popritom":"dabei",
                    "setrit, sporit":"sparen",
                    "hranica":"die Grenze",
                    "prenocovat":"√ºbernachten",
                    "nahnevany zly":"b√∂se"
                }
            },
            "perfekt": {
                title: "Nepravideln√© sloves√°",
                instruction: "er + hat/ist + perfektum",
                words: {
                    "piec≈•": "er hat gebacken",
                    "zaƒça≈•": "er hat begonnen",
                    "odboƒçi≈•": "er hat abgebogen",
                    "pon√∫ka≈•": "er hat angeboten",
                    "prosi≈•": "er hat gebeten",
                    "zosta≈•": "er ist geblieben",
                    "l√°ma≈•": "er hat gebrochen",
                    "odpor√∫ƒça≈•": "er hat empfohlen",
                    "jes≈•": "er hat gegessen",
                    "cestova≈•/jazdit": "er ist gefahren",
                    "pada≈•": "er ist gefallen",
                    "p√°ƒçi≈• sa": "er hat gefallen",
                    "chyta≈•": "er hat gefangen",
                    "zaƒça≈•": "er hat angefangen",
                    "n√°js≈•/pova≈æova≈•": "er hat gefunden",
                    "letie≈•": "er ist geflogen",
                    "tiec≈•": "er ist geflossen",
                    "≈æra≈•": "er hat gefressen",
                    "mrzn√∫≈•": "er ist gefroren",
                    "d√°va≈•": "er hat gegeben",
                    "√≠s≈•": "er ist gegangen",
                    "vyhra≈•": "er hat gewonnen",
                    "polieva≈•": "er hat gegossen",
                    "dr≈æa≈•": "er hat gehalten",
                    "vysie≈•": "er hat gehangen",
                    "volat sa": "er hat geheissen",
                    "pomahat": "er hat geholfen",
                    "zniet, zvonit": "er hat geklungen",
                    "prist": "er ist gekommen",
                    "dostat": "er hat bekommen",
                    "pozyvat": "er hat eingeladen",
                    "nechat, ponechat": "er hat gelassen",
                    "opustit": "er hat verlassen",
                    "bezat": "er ist gelaufen",
                    "citat": "er hat gelesen",
                    "lezat": "er hat gelegen",
                    "klamat": "er hat gelogen",
                    "merat": "er hat gemessen",
                    "vziat": "er hat genommen",
                    "radit": "er hat geraten",
                    "jazdit na koni": "er ist geritten",
                    "kricat": "er hat gerufen",
                    "zavolat": "er hat angerufen",
                    "spa≈•": "er hat geschlafen",
                    "zaspa≈•": "er ist eingeschlafen",
                    "bi≈•": "er hat geschlagen",
                    "zatvorit": "er hat geschlossen",
                    "rezat": "er hat geschnitten",
                    "pisat": "er hat geschrieben",
                    "plavat": "er ist geschwommen",
                    "pozerat": "er hat gesehen",
                    "pozerat TV": "er hat ferngesehen",
                    "spievat": "er hat gesungen",
                    "sediet": "er hat gesessen",
                    "hovorit": "er hat gesprochen",
                    "skakat": "er ist gesprungen",
                    "st√°≈•": "er hat gestanden",
                    "vst√°va≈•": "er ist aufgestanden",
                    "rozumie≈•": "er hat verstanden",
                    "st√∫pa≈•": "er ist gestiegen",
                    "nastupit": "er ist eingestiegen",
                    "vystupit": "er ist ausgestiegen",
                    "prestupit": "er ist umgestiegen",
                    "zomriet": "er ist gestorben",
                    "hadat sa": "er hat gestritten",
                    "nosit": "er hat getragen",
                    "stretnut": "er hat getroffen",
                    "pit": "er hat getrunken",
                    "zabudnut": "er hat vergessen",
                    "stratit": "er hat verloren",
                    "rast": "er ist gewachsen",
                    "umyvat sa": "er hat gewaschen",
                    "hadzat": "er hat geworfen",
                    "tahat": "er hat gezogen",
                    "obliect sa": "er hat sich angezogen",
                    "vyzliect sa": "er hat sich ausgezogen",
                    "prestahovat sa": "er ist umgezogen",
                    "prezliect sa": "er hat sich umgezogen"
                }
            }
        };

        let currentVocabulary = {};
        let remainingWords = [];
        let guessedWords = [];
        let currentWord; 
        let currentStreak = 0;

        const quizSelector = document.getElementById('quizSelector');
        const quizTitle = document.getElementById('quizTitle');
        const instructionText = document.getElementById('instructionText');
        const slovakWordElement = document.getElementById('slovakWord');
        const inputField = document.getElementById('inputField');
        const checkButton = document.getElementById('checkButton');
        const messageElement = document.getElementById('message');
        const streakDisplay = document.getElementById('streakDisplay');
        const resetButton = document.getElementById('resetButton');
        const statusButton = document.getElementById('statusButton');
        const statusModal = document.getElementById('statusModal');
        const closeModal = document.querySelector('.close-button');
        const guessedListElement = document.getElementById('guessedList');
        const remainingListElement = document.getElementById('remainingList');

        function initQuizSelector() {
            for (const key in quizData) {
                const option = document.createElement('option');
                option.value = key;
                option.textContent = quizData[key].title;
                quizSelector.appendChild(option);
            }
            
            quizSelector.addEventListener('change', (e) => {
                loadQuiz(e.target.value);
            });
            
            if (Object.keys(quizData).length > 0) {
                loadQuiz(Object.keys(quizData)[0]);
            }
        }

        function loadQuiz(quizKey) {
            const selectedQuiz = quizData[quizKey];
            quizTitle.textContent = selectedQuiz.title;
            instructionText.textContent = selectedQuiz.instruction;
            currentVocabulary = selectedQuiz.words;
            resetGame();
        }

        function updateStreakDisplay() {
            streakDisplay.textContent = `S√©ria: ${currentStreak}`;
        }

        function resetGame() {
            remainingWords = Object.keys(currentVocabulary);
            guessedWords = [];
            currentStreak = 0;
            updateStreakDisplay();
            
            inputField.style.display = 'block';
            checkButton.style.display = 'inline-block';
            checkButton.textContent = 'Skontrolova≈•';
            
            messageElement.textContent = '';
            messageElement.className = ''; 
            chooseNewWord();
        }

        function chooseNewWord() {
            if (remainingWords.length === 0) {
                slovakWordElement.textContent = 'üéâ Hotovo!';
                messageElement.textContent = 'Super pr√°ca! V≈°etko vie≈°.';
                messageElement.className = 'correct';
                inputField.style.display = 'none';
                checkButton.style.display = 'none';
                currentWord = null;
                return;
            }

            const randomIndex = Math.floor(Math.random() * remainingWords.length);
            currentWord = remainingWords[randomIndex];
            
            slovakWordElement.textContent = currentWord;
            
            inputField.value = '';
            messageElement.textContent = '';
            messageElement.className = '';
            
            if (window.innerWidth > 600) {
                inputField.focus(); 
            }
            
            checkButton.textContent = 'Skontrolova≈•';
            checkButton.onclick = checkAnswer; 
        }

        function checkAnswer() {
            if (!currentWord) return; 

            const correctAnswer = currentVocabulary[currentWord].trim().toLowerCase();
            const userAnswer = inputField.value.trim().toLowerCase();

            messageElement.className = '';
            void messageElement.offsetWidth;

            if (userAnswer === correctAnswer) {
                currentStreak++; 
                updateStreakDisplay(); 

                messageElement.textContent = '‚úîÔ∏è Spr√°vne!';
                messageElement.className = 'correct';
                
                guessedWords.push(currentWord);
                remainingWords = remainingWords.filter(word => word !== currentWord);
                
                checkButton.textContent = 'ƒéalej';
                checkButton.onclick = chooseNewWord; 
            } else {
                currentStreak = 0; 
                updateStreakDisplay(); 

                messageElement.innerHTML = `‚ùå Nespr√°vne.<br>Je to: <span style="color:var(--md-sys-color-primary)">${currentVocabulary[currentWord]}</span>`;
                messageElement.className = 'incorrect';
                
                checkButton.textContent = 'ƒéalej';
                checkButton.onclick = chooseNewWord;
            }
        }
        
        function showStatusModal() {
            guessedListElement.innerHTML = '<h3>U≈æ vie≈°:</h3>';
            remainingListElement.innerHTML = '<h3>Zost√°va:</h3>';

            const guessedUl = document.createElement('ul');
            if (guessedWords.length > 0) {
                guessedWords.forEach(word => {
                    const li = document.createElement('li');
                    li.textContent = `${word} = ${currentVocabulary[word]}`;
                    guessedUl.appendChild(li);
                });
            } else {
                guessedUl.innerHTML = '<li style="border:none; padding:0;">Zatiaƒæ niƒç.</li>';
            }
            guessedListElement.appendChild(guessedUl);
            
            const remainingUl = document.createElement('ul');
            if (remainingWords.length > 0) {
                 remainingWords.forEach(word => {
                    const li = document.createElement('li');
                    li.textContent = word;
                    remainingUl.appendChild(li);
                });
            } else {
                 remainingUl.innerHTML = '<li style="border:none; padding:0;">V≈°etko uh√°dnut√©!</li>';
            }
            remainingListElement.appendChild(remainingUl);

            statusModal.style.display = "flex"; 
        }

        function hideStatusModal() {
            statusModal.style.display = "none";
        }
        
        inputField.addEventListener('keypress', function (e) {
            if (e.key === 'Enter') {
                e.preventDefault(); 
                if (checkButton.textContent === 'Skontrolova≈•') {
                    checkAnswer();
                } else {
                    chooseNewWord();
                }
            }
        });
        
        resetButton.onclick = resetGame;
        statusButton.onclick = showStatusModal;
        closeModal.onclick = hideStatusModal;
        window.onclick = function(event) {
            if (event.target == statusModal) {
                hideStatusModal();
            }
        }

        document.addEventListener('DOMContentLoaded', initQuizSelector);
    </script>
</body>
</html>
